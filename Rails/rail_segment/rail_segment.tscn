[gd_scene load_steps=8 format=3 uid="uid://jx72y87c7ysq"]

[ext_resource type="Script" uid="uid://d0ad6bibyrsdr" path="res://Rails/rail_segment/rail_segment.gd" id="1_3o5ql"]
[ext_resource type="Material" uid="uid://dw0olshq03fku" path="res://Rails/rail_segment/material_rail_metail.material" id="2_iwxy6"]
[ext_resource type="Material" uid="uid://blhjihxmpbdy" path="res://Rails/rail_segment/rail_wood.material" id="3_iwxy6"]

[sub_resource type="Curve3D" id="Curve3D_m6w3m"]
resource_local_to_scene = true
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -4.7, 0, 0, -1.15, 0.1, 0, 1.15, -0.1, 0, 2.15, 0, -0.05, -0.05, -0.35, 1.35, 0.05, 0.35, -1.35, 4.6, 0.6, -2.05, 1.6, 0, 0, -1.6, 0, 0, 2.1, 0.9, -4.25, 1.35, 0, 0, -1.35, 0, 0, -1.8, 0.9, -4.2, 0, 0.4, 1.25, 0, -0.4, -1.25, -4.2, 0.25, -6.2, -0.85, 0, 0.05, 0.85, 0, -0.05, -2.05, -0.25, -8.15, 0, 0, 0, 0, 0, 0, 5.1, -0.05, -8.15),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 8

[sub_resource type="BoxMesh" id="BoxMesh_qc7oo"]
material = ExtResource("3_iwxy6")
size = Vector3(1.2, 0.05, 0.2)

[sub_resource type="MultiMesh" id="MultiMesh_3o5ql"]
resource_local_to_scene = true
transform_format = 1
instance_count = 49
mesh = SubResource("BoxMesh_qc7oo")
buffer = PackedFloat32Array(0.00860863, -0.0155995, -0.999841, -4.37423, 0, 0.999878, -0.0156001, 0.00535663, 0.999963, 0.000134296, 0.00860759, -0.00282749, 0.00845805, -0.0138056, -0.999869, -3.72145, 0, 0.999905, -0.0138061, 0.0150479, 0.999964, 0.000116773, 0.00845724, -0.00840583, 0.00831532, -0.012106, -0.999892, -3.07544, 0, 0.999927, -0.0121064, 0.0235126, 0.999965, 0.000100669, 0.00831471, -0.0138318, 0.00815716, -0.0102218, -0.999914, -2.4253, 0, 0.999948, -0.0102222, 0.0308773, 0.999967, 8.3384e-05, 0.00815673, -0.0191955, 0.00797369, -0.00803673, -0.999936, -1.77546, 0, 0.999968, -0.00803699, 0.0369397, 0.999968, 6.40845e-05, 0.00797343, -0.0244478, 0.00774983, -0.00536966, -0.999956, -1.12538, 0, 0.999986, -0.00536982, 0.0414635, 0.99997, 4.16152e-05, 0.00774971, -0.0295726, 0.00746, -0.00191691, -0.99997, -0.475283, 0, 0.999998, -0.00191697, 0.0440574, 0.999972, 1.43006e-05, 0.00745999, -0.0345356, 0.0070545, 0.0029128, -0.999971, 0.174691, 0, 0.999996, 0.00291288, 0.0440725, 0.999975, -2.05489e-05, 0.00705447, -0.0392812, 0.00641549, 0.0105256, -0.999924, 0.824815, 0, 0.999945, 0.0105258, 0.0402994, 0.999979, -6.75281e-05, 0.00641513, -0.0437099, 0.00507605, 0.0264747, -0.999637, 1.46927, 0, 0.99965, 0.026475, 0.0301461, 0.999987, -0.000134389, 0.00507427, -0.0475617, 0.0110832, 0.0765088, -0.997007, 2.12507, 0, 0.997069, 0.0765135, 0.0018825, 0.999939, -0.000848014, 0.0110507, -0.0498567, 0.216501, -0.0475413, -0.975124, 2.76897, 0, 0.998814, -0.0486963, -0.0130544, 0.976282, 0.0105428, 0.216245, -0.112615, 0.432863, -0.136099, -0.891127, 3.38326, 0, 0.988537, -0.150976, 0.0480325, 0.90146, 0.0653518, 0.427901, -0.310963, 0.662328, -0.170524, -0.72955, 3.92277, 0, 0.973754, -0.227604, 0.168746, 0.749214, 0.150749, 0.644945, -0.648869, 0.869049, -0.13295, -0.476528, 4.33185, 0, 0.963214, -0.268735, 0.330242, 0.494727, 0.233544, 0.83708, -1.12365, 0.98373, -0.0476325, -0.173223, 4.55854, 0, 0.964211, -0.265136, 0.506177, 0.179653, 0.260822, 0.948523, -1.70371, 0.995854, 0.0200039, 0.0887372, 4.59561, 0, 0.97552, -0.21991, 0.668808, -0.090964, 0.218998, 0.971476, -2.33049, 0.92205, 0.0570181, 0.382849, 4.46018, 0, 0.989091, -0.147306, 0.792543, -0.387071, 0.135824, 0.911991, -2.9513, 0.728978, 0.048749, 0.682799, 4.12592, 0, 0.997461, -0.0712146, 0.866773, -0.684537, 0.0519139, 0.727128, -3.49962, 0.470417, 0.0170492, 0.882279, 3.62063, 0, 0.999813, -0.0193204, 0.897032, -0.882444, 0.00908867, 0.470329, -3.90244, 0.235597, -0.00154398, 0.97185, 3.01809, 0, 0.999999, 0.0015887, 0.902448, -0.971851, -0.000374293, 0.235596, -4.14096, 0.0527912, -0.00246391, 0.998603, 2.37668, 0, 0.999997, 0.00246735, 0.900432, -0.998606, -0.000130254, 0.0527911, -4.24117, -0.00557872, 5.96518e-07, 0.999984, 1.72627, 0, 1, -5.96527e-07, 0.9, -0.999984, -3.32786e-09, -0.00557872, -4.24908, -0.0137412, 5.96556e-07, 0.999906, 1.07641, 0, 1, -5.96613e-07, 0.9, -0.999906, -8.19816e-09, -0.0137412, -4.24315, -0.0195033, 1.19162e-06, 0.99981, 0.42668, 0, 1, -1.19184e-06, 0.9, -0.99981, -2.32449e-08, -0.0195033, -4.23244, -0.0201559, 0, 0.999797, -0.223104, 0, 1, 0, 0.9, -0.999797, 0, -0.0201559, -4.21925, -0.0144394, 0, 0.999896, -0.872887, 0, 1, 0, 0.9, -0.999896, 0, -0.0144394, -4.2074, -0.00410409, 5.9652e-07, 0.999992, -1.52275, 0, 1, -5.96525e-07, 0.9, -0.999992, -2.44819e-09, -0.00410409, -4.2007, 0.122449, -0.0403316, 0.991655, -2.17218, 0, 0.999174, 0.0406374, 0.893454, -0.992475, -0.00497602, 0.122348, -4.21968, 0.337656, -0.104251, 0.935479, -2.80481, 0, 0.993848, 0.110755, 0.848225, -0.94127, -0.0373972, 0.335578, -4.35628, 0.581503, -0.152285, 0.799164, -3.38048, 0, 0.982324, 0.187188, 0.755336, -0.813544, -0.10885, 0.571224, -4.63864, 0.815937, -0.148222, 0.558818, -3.83916, 0, 0.966577, 0.256376, 0.613697, -0.578141, -0.209187, 0.788666, -5.07241, 0.96498, -0.0779113, 0.250488, -4.11882, 0, 0.954876, 0.297003, 0.434002, -0.262325, -0.286602, 0.921436, -5.62723, 0.998822, 0.0146121, -0.0462704, -4.19951, 0, 0.95358, 0.301138, 0.237445, 0.0485228, -0.300784, 0.952457, -6.23941, 0.910131, 0.103837, -0.401097, -4.07194, 0, 0.968085, 0.25062, 0.0536094, 0.41432, -0.228097, 0.881085, -6.84581, 0.71346, 0.122872, -0.689839, -3.72556, 0, 0.984505, 0.175357, -0.088999, 0.700696, -0.12511, 0.702404, -7.37293, 0.503818, 0.0921179, -0.858884, -3.22432, 0, 0.994298, 0.106641, -0.182929, 0.86381, -0.0537279, 0.500945, -7.77258, 0.28432, 0.0447792, -0.957683, -2.63386, 0, 0.998909, 0.0467068, -0.234647, 0.958729, -0.0132797, 0.28401, -8.03753, 0.0326811, -0.0112602, -0.999402, -1.99527, 0, 0.999937, -0.0112662, -0.249855, 0.999466, 0.000368191, 0.0326791, -8.15314, 0.00991737, -0.0232503, -0.99968, -1.34796, 0, 0.99973, -0.0232514, -0.238049, 0.999951, 0.000230593, 0.00991469, -8.16616, 0.00374574, -0.026181, -0.99965, -0.697611, 0, 0.999657, -0.0261812, -0.221986, 0.999993, 9.80678e-05, 0.00374445, -8.17064, 0.000639683, -0.0276621, -0.999617, -0.0479704, 0, 0.999617, -0.0276621, -0.204523, 1, 1.7695e-05, 0.000639438, -8.17213, -0.0013746, -0.0286069, -0.99959, 0.601935, 0, 0.999591, -0.0286069, -0.186259, 0.999999, -3.9323e-05, -0.00137403, -8.17195, -0.0027852, -0.029283, -0.999567, 1.2517, 0, 0.999571, -0.0292831, -0.167468, 0.999996, -8.15592e-05, -0.002784, -8.17066, -0.00388636, -0.0298048, -0.999548, 1.90153, 0, 0.999556, -0.029805, -0.14828, 0.999992, -0.000115833, -0.00388464, -8.16853, -0.0047733, -0.0302315, -0.999532, 2.55138, 0, 0.999543, -0.0302319, -0.128781, 0.999989, -0.000144306, -0.00477111, -8.16575, -0.00555493, -0.0305979, -0.999516, 3.20087, 0, 0.999532, -0.0305984, -0.109033, 0.999985, -0.000169972, -0.00555233, -8.16243, -0.00625361, -0.0309308, -0.999502, 3.85076, 0, 0.999522, -0.0309314, -0.0890453, 0.99998, -0.000193433, -0.00625062, -8.15863, -0.00694486, -0.0312628, -0.999487, 4.5007, 0, 0.999511, -0.0312635, -0.0688414, 0.999976, -0.000217121, -0.00694146, -8.15437)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_iwxy6"]
transparency = 1
albedo_color = Color(1, 0, 0, 0.270588)

[node name="RailSegment" type="Node3D"]
script = ExtResource("1_3o5ql")
plank_interval = 0.65
show_segment_points = true

[node name="SegmentPath" type="Path3D" parent="."]
curve = SubResource("Curve3D_m6w3m")

[node name="SegmentPointVisualizer" type="Node3D" parent="SegmentPath"]

[node name="TrackRight" type="CSGPolygon3D" parent="SegmentPath"]
polygon = PackedVector2Array(0.51, 0.09, 0.54, 0.09, 0.57, 0.05, 0.56, 0, 0.49, 0, 0.48, 0.05)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 0.1
path_simplify_angle = 0.0
path_rotation = 1
path_rotation_accurate = true
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = false
smooth_faces = true
material = ExtResource("2_iwxy6")

[node name="TrackLeft" type="CSGPolygon3D" parent="SegmentPath"]
polygon = PackedVector2Array(-0.52, 0, -0.53, 0.05, -0.5, 0.09, -0.47, 0.09, -0.44, 0.05, -0.45, 0)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 0.1
path_simplify_angle = 0.0
path_rotation = 1
path_rotation_accurate = true
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = false
smooth_faces = true
material = ExtResource("2_iwxy6")

[node name="TrackPlanks" type="MultiMeshInstance3D" parent="SegmentPath"]
multimesh = SubResource("MultiMesh_3o5ql")

[node name="HitBox" type="CSGPolygon3D" parent="SegmentPath"]
visible = false
polygon = PackedVector2Array(-1.2, 0.05, -1.2, 0.95, 1.2, 0.95, 1.2, 0.05)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 0.5
path_simplify_angle = 0.0
path_rotation = 1
path_rotation_accurate = false
path_local = true
path_continuous_u = true
path_u_distance = 1.0
path_joined = false
material = SubResource("StandardMaterial3D_iwxy6")

[node name="PathFollow3D" type="PathFollow3D" parent="SegmentPath"]
transform = Transform3D(0.00729802, 0, -0.999796, 0, 0.999824, 0, 0.999812, 0, 0.0072979, -4.7, 0.5, 0)
v_offset = 0.5
rotation_mode = 2
loop = false

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="SegmentPath/PathFollow3D"]

[connection signal="curve_changed" from="SegmentPath" to="." method="_on_path_3d_curve_changed"]
